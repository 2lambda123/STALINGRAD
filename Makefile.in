all: QobiScheme stalingrad

targets:
	@echo QobiScheme
	@echo stalingrad


QobiScheme:
	$(MAKE) -C QobiScheme all

stalingrad: QobiScheme
	$(MAKE) -C source all

test:
	rm -rf test-runs
	./tools/test-driver '(record-expectations! (fast-expectations))'
	$(MAKE) -C test-runs all
	./tools/test-failures

test-full:
	rm -rf test-runs
	./tools/test-driver '(record-expectations! (all-expectations))'
	$(MAKE) -C test-runs all
	./tools/test-failures

test-serially:
	./tools/test-driver '(run-tests! (fast-expectations))'

test-serially-full:
	./tools/test-driver '(run-tests! (all-expectations))'

tests-running:
	find test-runs -name "*.time" -empty -print | sort

Makefile: Makefile.in
	./config.status

.PHONY: all targets QobiScheme stalingrad test test-full test-serially test-serially-full tests-running
